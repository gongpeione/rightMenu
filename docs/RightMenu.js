!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.RightMenu=e()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},i={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,UP:38,DOWN:40,LEFT:37,RIGHT:39,BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,SPACE:32,DELETE:46,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},o={USE_CAPTURE:{BUBBLING:!1,CAPTURE:!0},KEY_CODE:i},a={$:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return e instanceof NodeList?Array.from(e,function(e){return e.querySelector(t)}):e.querySelector(t)},$$:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return e instanceof NodeList?Array.from(e,function(e){return e.querySelectorAll(t)}):e.querySelectorAll(t)},warn:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];console.warn(e)},create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement(t);for(var r in e)n.setAttribute(r,e[r]);return n},attr:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n?void t.setAttribute(e,n):t.getAttribute(e)},attrs:function(t){var e={};return Array.from(t.attributes).forEach(function(n){var r=n.nodeName;e[r]=t.getAttribute(r)}),e},class:function(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return void t.classList.remove(e);if(Array.isArray(e)){var n;return void(n=t.classList).add.apply(n,r(e))}t.classList.add(e)},css:function(t,e){t.style.cssText=t.style.cssText?t.style.cssText+=e:e},width:function(t){return t.getBoundingClientRect().width},height:function(t){return t.getBoundingClientRect().height},merge:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e;return r.forEach(function(e){for(var n in e)"object"===t(e[n])?o[n]=a.merge(o[n],e[n]):o[n]=e[n]}),o},vdom:function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e(this,t),this.tagName=n,this.attrs=r,this.children=Array.isArray(i)?i:Array.from(i),this.event=[]}return n(t,[{key:"render",value:function(){var e=document.createElement(this.tagName),n=this.attrs;for(var r in n)e.setAttribute(r,n[r]);this.event.length&&this.event.forEach(function(t){e.addEventListener(t.eventName,t.callback)});var i=this.children;return Array.from(i).forEach(function(n){var r=n instanceof t?n.render():document.createTextNode(n);e.appendChild(r)}),e}},{key:"addEvent",value:function(t,e){arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.USE_CAPTURE.BUBBLING;return this.event.push({eventName:t,callback:e}),this}},{key:"addChildren",value:function(t){var e;(e=this.children).push.apply(e,r(t))}}]),t}()};return function(){function t(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.parent="string"==typeof r?a.$(r):r,this.options=i,this.isHidden=!0,this.type=["separator","link","function","text"],this.options.items&&(this.menu=this.render(),this.parent.appendChild(this.menu),this.parent.addEventListener("contextmenu",function(t){n.show();var e=n._getXY(t);return n.setPosition(e.x,e.y),t.preventDefault(),!1}),document.addEventListener("click",function(t){t.target!==n.menu&&n.hide()}),document.addEventListener("contextmenu",function(t){t.target!==n.menu&&t.target!==n.parent&&n.hide()}))}return n(t,[{key:"render",value:function(){var t=this,e=[];this.options.items.forEach(function(n){if(!(t.type.indexOf(n.type)<0))switch(n.type){case"separator":e.push(t.separator(n));break;case"link":e.push(t.link(n));break;case"function":e.push(t.function(n));break;case"text":e.push(t.text(n));break;default:return}});var n="g-contextMenu "+(this.options.class||"");return new a.vdom("ul",{class:n},e).render()}},{key:"separator",value:function(t){return new a.vdom("li",{class:"separator"})}},{key:"link",value:function(t){var e=new a.vdom("a",{href:t.content||"",target:t.target?t.target:"_blank"},[t.title]),n=new a.vdom("li",{class:"link"+(t.disabled?" disabled":"")},[e]);return t.disabled&&n.addEvent("click",function(t){return t.preventDefault(),!1}),n}},{key:"function",value:function(t){var e=new a.vdom("li",{class:"function"+(t.disabled?" disabled":"")},[t.title]);return t.disabled||e.addEvent("click",function(e){t.content(e)}),e}},{key:"text",value:function(t){return new a.vdom("li",{class:"text"+(t.disabled?" disabled":"")},[t.title])}},{key:"show",value:function(){a.class(this.menu,"hide",!0),a.class(this.menu,"show")}},{key:"hide",value:function(){a.class(this.menu,"show",!0),a.class(this.menu,"hide")}},{key:"setPosition",value:function(t,e){a.css(this.menu,"left:"+t+"px; top:"+e+"px")}},{key:"_getXY",value:function(t){var e=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft,r=a.width(document.body),i=a.height(document.body),o=a.width(this.menu),u=a.height(this.menu),s=t.clientX+n,c=t.clientY+e;return r-s<o&&(s-=o),i-c<u&&(c-=u),{x:s,y:c}}}]),t}()});
